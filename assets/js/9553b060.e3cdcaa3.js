"use strict";(self.webpackChunk_sensejs_sensejs_doc=self.webpackChunk_sensejs_sensejs_doc||[]).push([[831],{8005:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>l,contentTitle:()=>a,default:()=>p,frontMatter:()=>s,metadata:()=>r,toc:()=>d});var i=t(5250),o=t(9074);const s={id:"entrypoint",sidebar_pos:2},a="Entry point",r={id:"module/entrypoint",title:"Entry point",description:"Every application has an entry point, in SenseJS, an entry point is defined as a module.",source:"@site/docs/module/entry-point.md",sourceDirName:"module",slug:"/module/entrypoint",permalink:"/docs/module/entrypoint",draft:!1,unlisted:!1,editUrl:"https://github.com/sensejs/sensejs/edit/master/website/docs/module/entry-point.md",tags:[],version:"current",frontMatter:{id:"entrypoint",sidebar_pos:2},sidebar:"tutorialSidebar",previous:{title:"Defining Modules",permalink:"/docs/module/defining-modules"}},l={},d=[{value:"Utility applications",id:"utility-applications",level:2},{value:"Daemon applications",id:"daemon-applications",level:2},{value:"Conclusion",id:"conclusion",level:2}];function c(n){const e={code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",...(0,o.a)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.h1,{id:"entry-point",children:"Entry point"}),"\n",(0,i.jsx)(e.p,{children:"Every application has an entry point, in SenseJS, an entry point is defined as a module."}),"\n",(0,i.jsx)(e.p,{children:"Applications can be divided into two categories: one is utility applications that run once and exits when the job is\ndone or failed; the other is long-running applications that keep running and waiting for requests, a.k.a. daemons or\nservers."}),"\n",(0,i.jsx)(e.h2,{id:"utility-applications",children:"Utility applications"}),"\n",(0,i.jsx)(e.p,{children:"In SenseJS, such an application can be started through:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-typescript",children:"@Module({ requires: [OtherModules] })\nclass MyApp {\n    main() {\n    }\n}\n\nApplicationRunner.instance.run(MyApp, 'main');\n"})}),"\n",(0,i.jsxs)(e.p,{children:["the second argument of ",(0,i.jsx)(e.code,{children:"ApplicationRunner.instance.run"})," is the name of the entry function. Once the control-flow leaves\nthe ",(0,i.jsx)(e.code,{children:"main"})," function, the framework will destroy all components and exit the process."]}),"\n",(0,i.jsx)(e.h2,{id:"daemon-applications",children:"Daemon applications"}),"\n",(0,i.jsx)(e.p,{children:"Such an application can be started through:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-typescript",children:"@Module({ requires: [OtherModules] })\nclass MyApp {\n    @OnModuleStart()\n    onModuleStart() {\n        // Start listening for requests\n    }\n    @OnModuleStop()\n    onModuleStop() {\n        // Stop listening for requests\n    }\n}\nApplicationRunner.instance.start(MyApp);\n"})}),"\n",(0,i.jsxs)(e.p,{children:["In addition to the ",(0,i.jsx)(e.code,{children:"@OnModuleCreated"}),"/",(0,i.jsx)(e.code,{children:"@OnModuleDestroyed"})," hooks, applications running in this way will also invoke\n",(0,i.jsx)(e.code,{children:"@OnModuleStart"}),"/",(0,i.jsx)(e.code,{children:"@OnModuleStop"}),"."]}),"\n",(0,i.jsxs)(e.p,{children:["Such an app will not exit until ",(0,i.jsx)(e.code,{children:"ProcessManager.exit()"})," is called or any exit signals are received. SenseJS also ensures\nall ",(0,i.jsx)(e.code,{children:"@OnModuleStop"})," hooks are invoked before the app exits."]}),"\n",(0,i.jsx)(e.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,i.jsx)(e.p,{children:"A typical SenseJS application is a collection of modules. Some modules are organizing injectables, while some modules\nare managing initialization and de-initialization of I/O resources, and an entry module that depends on all the others.\nBased on the dependency graph of all the modules, SenseJS can gracefully start up and shut down your application."})]})}function p(n={}){const{wrapper:e}={...(0,o.a)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(c,{...n})}):c(n)}},9074:(n,e,t)=>{t.d(e,{Z:()=>r,a:()=>a});var i=t(79);const o={},s=i.createContext(o);function a(n){const e=i.useContext(s);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function r(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:a(n.components),i.createElement(s.Provider,{value:e},n.children)}}}]);